(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{879:function(e,s,l){Promise.resolve().then(l.bind(l,9760))},7356:function(e,s,l){"use strict";var r=l(7437);s.Z=e=>{let{className:s}=e;return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[(0,r.jsx)("path",{d:"M9.5 7L4.5 12L9.5 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{opacity:"0.5",d:"M4.5 12L14.5 12C16.1667 12 19.5 13 19.5 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}},1847:function(e,s,l){"use strict";var r=l(7437);s.Z=e=>{let{className:s}=e;return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[(0,r.jsx)("path",{d:"M3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.714 22 12C22 11.6585 22 11.4878 21.9848 11.3142C21.9142 10.5049 21.586 9.71257 21.0637 9.09034C20.9516 8.95687 20.828 8.83317 20.5806 8.58578L15.4142 3.41944C15.1668 3.17206 15.0431 3.04835 14.9097 2.93631C14.2874 2.414 13.4951 2.08581 12.6858 2.01515C12.5122 2 12.3415 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355Z",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M17 22V21C17 19.1144 17 18.1716 16.4142 17.5858C15.8284 17 14.8856 17 13 17H11C9.11438 17 8.17157 17 7.58579 17.5858C7 18.1716 7 19.1144 7 21V22",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("path",{opacity:"0.5",d:"M7 8H13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}},6604:function(e,s,l){"use strict";var r=l(7437);s.Z=e=>{let{className:s}=e;return(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:(0,r.jsx)("path",{d:"M8.01731 8.01736C11.3506 4.68402 13.0173 3.01736 15.0884 3.01736C17.1594 3.01736 18.8261 4.68402 22.1594 8.01736C25.4927 11.3507 27.1595 13.0174 27.1594 15.0884C27.1594 17.1595 25.4928 18.8262 22.1594 22.1595C18.8261 25.4928 17.1594 27.1595 15.0884 27.1594C13.0173 27.1595 11.3506 25.4928 8.01731 22.1595C4.68397 18.8262 3.01731 17.1595 3.01734 15.0884C3.01729 13.0174 4.68401 11.3507 8.01731 8.01736Z",stroke:"currentColor",strokeWidth:"1.5"})})}},9760:function(e,s,l){"use strict";var r=l(7437),t=l(2265),a=l(6173),n=l(1847),i=l(7356),c=l(6604),m=l(4379),o=l.n(m);s.default=()=>{let[e,s]=(0,t.useState)({name:"",prenom:"",email:"",number:""}),[l,m]=(0,t.useState)({matricule:"",profil:"",dr:[],secteur:[]}),[d,x]=(0,t.useState)({name:"",prenom:"",email:"",number:"",matricule:"",profil:"",dr:"",secteur:""}),[u,h]=(0,t.useState)([]),[p,j]=(0,t.useState)({}),[f,b]=(0,t.useState)([]),[N,g]=(0,t.useState)([]),[v,C]=(0,t.useState)(!1),[w,k]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/data"),s=await e.json();h(s.profils),j(s.dr_secteurs)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es",e)}})()},[]);let y=()=>{let s={...d},r=!0;return e.name?s.name="":(s.name="Le nom est obligatoire",r=!1),e.prenom?s.prenom="":(s.prenom="Le pr\xe9nom est obligatoire",r=!1),e.email?s.email="":(s.email="L'email est obligatoire",r=!1),e.number?s.number="":(s.number="Le t\xe9l\xe9phone est obligatoire",r=!1),l.matricule?s.matricule="":(s.matricule="Le matricule est obligatoire",r=!1),l.profil?s.profil="":(s.profil="Le profil est obligatoire",r=!1),["Comptable","AGC"].includes(l.profil)?(0===l.dr.length?(s.dr="La direction r\xe9gionale est obligatoire",r=!1):s.dr="",0===l.secteur.length?(s.secteur="Le secteur est obligatoire",r=!1):s.secteur=""):(s.dr="",s.secteur=""),x(s),r},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";o().mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:s,title:e,padding:"10px 20px"})},S=async()=>{if(y()){let s={name:e.name,prenom:e.prenom,email:e.email,number:e.number,matricule:l.matricule,profil:l.profil,dr:l.dr,secteur:l.secteur};try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s})});if(e.ok)await e.json(),L("L'utilisateur a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s","success");else{let s=await e.json();L(s.message,"error")}}catch(e){L("Erreur lors de la soumission","error")}}},E=l=>{s({...e,[l.target.name]:l.target.value})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2.5 xl:flex-row",children:[(0,r.jsxs)("div",{className:"panel flex-1 px-0 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:[(0,r.jsxs)("p",{className:"item-center flex justify-center text-center",children:[(0,r.jsx)("button",{type:"button",className:"flex cursor-default items-center rounded-md font-medium text-primary duration-300",children:(0,r.jsx)(c.Z,{className:"shrink-0 fill-primary"})}),(0,r.jsx)("span",{className:"ml-2 text-xl font-thin text-black",children:"Ajouter un utilisateur"})]}),(0,r.jsx)("hr",{className:"my-6 border-white-light dark:border-[#1b2e4b]"}),(0,r.jsxs)("div",{className:"mt-8 px-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between lg:flex-row",children:[(0,r.jsxs)("div",{className:"mb-6 w-full lg:w-1/2 ltr:lg:mr-6 rtl:lg:ml-6",children:[(0,r.jsx)("div",{className:"text-lg",children:"Information personnelle :"}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"reciever-name",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Nom",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"reciever-name",type:"text",name:"name",className:"form-input flex-1",placeholder:"Entrer votre nom",onChange:E})]}),d.name&&(0,r.jsx)("p",{className:"text-red-500",children:d.name}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"reciever-prenom",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Pr\xe9noms",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"reciever-prenom",type:"text",name:"prenom",className:"form-input flex-1",placeholder:"Entrer votre pr\xe9nom",onChange:E})]}),d.prenom&&(0,r.jsx)("p",{className:"text-red-500",children:d.prenom}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"reciever-email",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Email",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"reciever-email",type:"email",name:"email",className:"form-input flex-1",placeholder:"Entrer votre email",onChange:E})]}),d.email&&(0,r.jsx)("p",{className:"text-red-500",children:d.email}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"reciever-number",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["T\xe9l\xe9phone",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"reciever-number",type:"text",name:"number",className:"form-input flex-1",placeholder:"Entrer votre t\xe9l\xe9phone",onChange:E})]}),d.number&&(0,r.jsx)("p",{className:"text-red-500",children:d.number})]}),(0,r.jsxs)("div",{className:"w-full lg:w-1/2",children:[(0,r.jsx)("div",{className:"text-lg",children:"Information Compte :"}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"acno",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Matricule",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"acno",type:"text",name:"matricule",className:"form-input flex-1",placeholder:"Entrer votre matricule",onChange:e=>{m({...l,[e.target.name]:e.target.value})}})]}),d.matricule&&(0,r.jsx)("p",{className:"text-red-500",children:d.matricule}),(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"profil",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Profil",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(a.ZP,{placeholder:"Choisir un profil",options:u,onChange:e=>{if(e){if(["Comptable","AGC"].includes(e.value)){let e=Object.keys(p).map(e=>({value:e,label:e}));C(!0),b(e)}else C(!1),b([]),g([]),k(!1),m({...l,dr:[],secteur:[]});m({...l,profil:e.value})}else C(!1),k(!1),m({...l,profil:"",dr:[],secteur:[]})},isClearable:!0})]}),d.profil&&(0,r.jsx)("p",{className:"text-red-500",children:d.profil}),v&&(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"DR",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Direction r\xe9gionale",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(a.ZP,{placeholder:"S\xe9lectionner une direction r\xe9gionale",options:f,isMulti:!0,onChange:(e,s)=>{let r=e.map(e=>e.value),t=l.secteur.filter(e=>r.some(s=>{var l;return null===(l=p[s])||void 0===l?void 0:l.includes(e)}));g(r.flatMap(e=>p[e]||[])),k(e.length>0),m(s=>({...s,dr:Array.from(e),secteur:t}))}})]}),d.dr&&(0,r.jsx)("p",{className:"text-red-500",children:d.dr}),w&&(0,r.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,r.jsxs)("label",{htmlFor:"secteur",className:"mb-0 w-1/3 ltr:mr-2 rtl:ml-2",children:["Secteur",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(a.ZP,{placeholder:"S\xe9lectionner un secteur",options:N,isMulti:!0,onChange:(e,s)=>{m({...l,secteur:Array.from(e)})},value:l.secteur})]}),d.secteur&&(0,r.jsx)("p",{className:"text-red-500",children:d.secteur})]})]}),(0,r.jsx)("div",{className:"mb-10 mt-10",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-1",children:[(0,r.jsxs)("button",{type:"button",className:"btn btn-success w-full gap-2",onClick:S,children:[(0,r.jsx)(n.Z,{className:"shrink-0 ltr:mr-2 rtl:ml-2"}),"Ajouter"]}),(0,r.jsxs)("button",{type:"button",className:"btn btn-danger w-full gap-2",children:[(0,r.jsx)(i.Z,{className:"shrink-0 ltr:mr-2 rtl:ml-2"}),"Retour"]})]})})]})]}),(0,r.jsx)("div",{className:"mt-6 w-full xl:mt-0 xl:w-96",children:(0,r.jsxs)("div",{className:"panel mb-5 h-full",children:[(0,r.jsx)("hr",{className:"my-6 border-white-light dark:border-[#1b2e4b]"}),(0,r.jsxs)("p",{className:"flex items-center justify-center text-center",children:[(0,r.jsx)("button",{type:"button",className:" h-10 cursor-default items-center rounded-md font-medium text-success duration-300",children:(0,r.jsx)(c.Z,{className:"shrink-0 fill-success"})}),(0,r.jsx)("span",{className:"ml-4 items-center justify-center text-center text-lg font-bold",children:"R\xe9capitulatif"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Nom : ",(0,r.jsx)("span",{className:"text-black",children:e.name})]})," ",(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Pr\xe9noms :"," ",(0,r.jsxs)("span",{className:"text-black",children:[e.prenom," "]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Email : ",(0,r.jsx)("span",{className:"text-black",children:e.email})]})," ",(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["T\xe9l\xe9phone :"," ",(0,r.jsx)("span",{className:"text-black",children:e.number})]})," "]}),(0,r.jsxs)("p",{className:"mt-4",children:[(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Matricule :"," ",(0,r.jsx)("span",{className:"text-black",children:l.matricule})]})," ",(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Profil :"," ",(0,r.jsx)("span",{className:"text-black",children:l.profil})]})," ",(0,r.jsx)("br",{}),v&&l.dr.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Direction r\xe9gionale :"," ",(0,r.jsx)("span",{className:"text-black",children:l.dr.map(e=>e.label).join(", ")})]})," ",(0,r.jsx)("br",{})]}),w&&l.secteur.length>0&&(0,r.jsxs)("label",{className:"text-[#8e8e8e]",children:["Secteur :"," ",(0,r.jsx)("span",{className:"text-black",children:l.secteur.map(e=>e.label).join(", ")})]})]})]})]})})]})}}},function(e){e.O(0,[724,52,971,23,744],function(){return e(e.s=879)}),_N_E=e.O()}]);